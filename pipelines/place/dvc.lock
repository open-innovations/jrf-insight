schema: '2.0'
stages:
  transform:
    cmd: papermill transform.ipynb output/transform.ipynb
    deps:
    - path: ../../data-mart/hbai/by_age_category.parquet
      hash: md5
      md5: 5e2c7bca5a803e26f63af44fc263ed03
      size: 21323
    - path: ../../data-mart/hbai/by_savings_and_investments.parquet
      hash: md5
      md5: 2d807bf6d54bee2eef526604de1cec9e
      size: 41836
    - path: ../../data/clif/clif_REL.csv
      hash: md5
      md5: 316de9b77ab78697531e257e1b4796e0
      size: 5373056
    - path: ../../data/council-tax-support/council-tax-support.csv
      hash: md5
      md5: e18af980244efe21cf6896e7cc9e621b
      size: 1604522
    - path: ../../data/geo/geography_tree.csv
      hash: md5
      md5: 5b3cd5714f487269a63ef9d581cc77a5
      size: 57831
    - path: ../../data/population-estimates/population-estimates.csv
      hash: md5
      md5: 7dd72902748ccb3cbd21d145df1fa2e9
      size: 11866279
    - path: geo.py
      hash: md5
      md5: a85d697922d85f56cc2aa2a94d64716e
      size: 2893
    - path: params.py
      hash: md5
      md5: d4297ca94afcb930b25e1a0aca7cb029
      size: 162
    - path: places.yaml
      hash: md5
      md5: 4cc762ec55f3b34b4232e67a9c63fe15
      size: 19740
    - path: transform.ipynb
      hash: md5
      md5: 33ec46028dd9a248cb8517d0402ef248
      size: 98835
    outs:
    - path: ../../data-mart/place_data/lookup.parquet
      hash: md5
      md5: 57e91b45d219971711b6396410eab73a
      size: 32692
    - path: ../../data-mart/place_data/variables.parquet
      hash: md5
      md5: 5695b4482f823130ebc1abbfecc92d4f
      size: 164823
    - path: ../../data/interim/place_data.json
      hash: md5
      md5: 34df4a537df61f6bf1f4afc7eb0df6a0
      size: 1592379
    - path: ../../data/interim/place_data.parquet
      hash: md5
      md5: 83611b563a35063ed1b6f4d4eaf8cfe5
      size: 158826
  transform-geojson:
    cmd: papermill geojson.ipynb output/geojson.ipynb
    deps:
    - path: ../../data/geo/cauth22.geojson
      hash: md5
      md5: e66ff77855f2f73178620a9cf6c5bc4c
      size: 19880
    - path: ../../data/geo/cty22.geojson
      hash: md5
      md5: 99b9d868600d7a34e30cc242cb7b1eb6
      size: 16986
    - path: ../../data/geo/lad22.geojson
      hash: md5
      md5: 2178172030185862c396652fa86c0ed1
      size: 88054
    - path: ../../data/geo/panrgn22.geojson
      hash: md5
      md5: a900de22222959623905b921879f57f3
      size: 16719
    - path: ../../data/geo/rgn22.geojson
      hash: md5
      md5: 6295a45adee209c39e3b34442cbb1814
      size: 28694
    - path: ../../data/geo/wd22.geojson
      hash: md5
      md5: 52b14cc60bba5971a5c951cbd8fc1542
      size: 962163
    - path: geojson.ipynb
      hash: md5
      md5: e3518f2315a1656ee971d8125efae8f2
      size: 5685
    - path: loaders.py
      hash: md5
      md5: 43f8efddfa9034cf6397c68120a53242
      size: 589
    - path: params.py
      hash: md5
      md5: d4297ca94afcb930b25e1a0aca7cb029
      size: 162
    outs:
    - path: ../../data/interim/shapes.parquet
      hash: md5
      md5: e273cc16c7db86803619205897fe4599
      size: 514139
      isexec: true
  generate-list:
    cmd: python generate-list.py
    deps:
    - path: ../../data/interim/shapes.parquet
      hash: md5
      md5: e273cc16c7db86803619205897fe4599
      size: 514139
    - path: generate-list.py
      hash: md5
      md5: e2d487a67eb7be49813bb0c7970d3a3c
      size: 304
    - path: params.py
      hash: md5
      md5: d4297ca94afcb930b25e1a0aca7cb029
      size: 162
    outs:
    - path: places.yaml
      hash: md5
      md5: 4cc762ec55f3b34b4232e67a9c63fe15
      size: 19740
      isexec: true
  prepare-batch:
    cmd: python batch.py
    deps:
    - path: ../../data/interim/place_data.parquet
      hash: md5
      md5: 83611b563a35063ed1b6f4d4eaf8cfe5
      size: 158826
    - path: ../../data/interim/shapes.parquet
      hash: md5
      md5: e273cc16c7db86803619205897fe4599
      size: 514139
    - path: batch.py
      hash: md5
      md5: 83896a2057720dac60958cf8bcf26985
      size: 523
    - path: params.py
      hash: md5
      md5: d4297ca94afcb930b25e1a0aca7cb029
      size: 162
    - path: places.yaml
      hash: md5
      md5: 4cc762ec55f3b34b4232e67a9c63fe15
      size: 19740
    - path: prepare.py
      hash: md5
      md5: 84effd883777f79299e7a8f9ce4690d4
      size: 2048
    outs:
    - path: ../../src/_data/place/
      hash: md5
      md5: 3e91c38063aa38a77dcff9d8d474f4fe.dir
      size: 2434279
      nfiles: 3290
